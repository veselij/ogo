{% extends 'main/base.html' %}
{% load static %}
{% load thumbnail %}
{% block title %}
    <title>Ogo –¢—É—Ä–∞–≥–µ–Ω—Å—Ç–≤–æ –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏–π</title>
    <meta name="description" content="–¢—É—Ä–∞–≥–µ–Ω—Å—Ç–≤–æ –û–≥–æ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —É—Å–ª—É–≥–∏ –ø–æ –ø–æ–∏—Å–∫—É –∏ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—é —Ç—É—Ä–æ–≤ –∏ –ø—É—Ç–µ–≤–æ–∫.">
{% endblock title %}
{% block content %}
{% if mobile %}
<div style="display: flex; flex-direction: column; flex-wrap: wrap; padding-top: 40px">
<div class="w-auto" style="height: 600px; background:linear-gradient(rgba(0, 0, 0, 0.4), rgba(0, 0, 0, 0.4)), url({% static 'palm.jpg' %});background-size: 100% 100%; flex-wrap: wrap;text-align: justify;">
<h1 class="display-6 p-5 text-white" style="text-align: center">–£ –Ω–∞—Å –Ω–µ—Ç –ø—Ä–∏–≤—ã—á–Ω–æ–≥–æ –ø–æ–∏—Å–∫–∞ —Ç—É—Ä–∞</h1>
{% else %}
<div style="display: flex; flex-direction: row; flex-wrap: wrap; padding-top: 40px;">
<div class="w-100" style="height: 600px; background:linear-gradient(rgba(0, 0, 0, 0.4), rgba(0, 0, 0, 0.4)), url({% static 'palm_desktop.jpg' %});background-size: 100% 100%; flex-wrap: wrap;text-align: justify;">
<h1 class="display-6 ps-5 pe-5 pb-5 text-white" style="text-align: center; padding-top: 8rem;">–£ –Ω–∞—Å –Ω–µ—Ç –ø—Ä–∏–≤—ã—á–Ω–æ–≥–æ –ø–æ–∏—Å–∫–∞ —Ç—É—Ä–∞</h1>
{% endif %}
    <p class="lead text-white ps-5 pe-5" style="text-align: center">–ü–æ—Å–ª–µ —É—Ç–æ–º–∏—Ç–µ–ª—å–Ω–æ–≥–æ –ø–æ–∏—Å–∫–∞ –Ω–∞ —Å–∞–π—Ç–∞—Ö, –∫–ª–∏–µ–Ω—Ç—ã –ø—Ä–∏—Ö–æ–¥—è—Ç –∫ –Ω–∞–º –∑–∞ "–∂–∏–≤—ã–º –æ–±—â–µ–Ω–∏–µ–º". –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –æ–¥–Ω–æ –∏–∑ –≥–æ—Ä—è—á–∏—Ö –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π –∏ –Ω–∞–ø–∏—à–∏—Ç–µ –Ω–∞–º.</p>

  {% if mobile %}
  <div class="w-100 text-center p-3 d-flex justify-content-center" >
          <select class="form-select w-auto" aria-label="Default select example" id="selectcountry" onchange="getComboA(this)">
              <option value="" selected>–í—ã–±–µ—Ä–µ—Ç–µ –°—Ç—Ä–∞–Ω—É</option>
              {% for country in countries %}
                  <option value="{{country}}">{{country}}</option>
              {% endfor %}
          </select>
    </div>
  <div class="w-100 text-center p-3 d-flex justify-content-center" >
          <button type="button" class="btn btn-dark" id="search">–ù–∞–π—Ç–∏ –≥–æ—Ä—è—á–∏–π —Ç—É—Ä</button>
    </div>
  <div class="w-100 text-center p-3 d-flex justify-content-center" >
          <a href="https://wa.me/{{ seller.mobile_phone_number }}?text=–ü—Ä–∏–≤–µ—Ç! –•–æ—á—É –∫—É–ø–∏—Ç—å —Ç—É—Ä –≤ " id="link" class="btn btn-warning">–ù–∞–ø–∏—Å–∞—Ç—å WhatsApp</a>
    </div>
  {% else %}

  <div class="w-100 text-center p-3 d-flex justify-content-center" >
      <div class="btn-toolbar justify-content-between" role="toolbar" aria-label="Toolbar with button groups">
          <div class="btn-group me-2">
          <select class="form-select w-auto" aria-label="Default select example" id="selectcountry" onchange="getComboA(this)">
              <option value="" selected>–í—ã–±–µ—Ä–µ—Ç–µ –°—Ç—Ä–∞–Ω—É</option>
              {% for country in countries %}
                  <option value="{{country}}">{{country}}</option>
              {% endfor %}
          </select>
          </div>
          <div class="btn-group me-2">
          <button type="button" class="btn btn-dark" id="search">–ù–∞–π—Ç–∏ –≥–æ—Ä—è—á–∏–π —Ç—É—Ä</button>
          </div>
          <div class="btn-group me-2">
          <a href="https://wa.me/{{ seller.mobile_phone_number }}?text=–ü—Ä–∏–≤–µ—Ç! –•–æ—á—É –∫—É–ø–∏—Ç—å —Ç—É—Ä –≤ " id="link" class="btn btn-warning">–ù–∞–ø–∏—Å–∞—Ç—å WhatsApp</a>
          </div>
    </div>
  </div>
    {% endif %}
</div>
  {% for trip in trip_list %}
    {% if mobile %}
      <div class="card mb-3 border border-0 rounded-0 " style="margin: 4%; background-color: #E8E8E8" id="start">
    {% else %}
      <div class="card mb-3 border border-0 rounded-0 " style="width: 280px; margin: 10px; background-color: #E8E8E8" id="start">
    {% endif %}
{% for pic in trip.picture_set.all %}
    {% if pic.front_picture %}
    {% thumbnail pic.picture "300x300" crop="center" as im %}
    <a href="{{trip.get_absolute_url}}"><img  src="{{ im.url }}" width="{{ im.width }}" height="{{ im.height }}" class="card-img-top"></a>
    {% endthumbnail %}
    {% endif %}
{% endfor %}
    <div class="card-body">
      <div style="display: flex; flex-direction: row">
          {% if trip.stars > 2 %}
              <h5 class="card-title">{{ trip.name }} {{ trip.stars }}*</h5>
          {% else %}
              <h5 class="card-title">{{ trip.name }}</h5>
          {% endif %}
      </div>
      <p class="card-text" style="word-wrap: normal;white-space:pre-wrap">üè® {{ trip.resort.country }}, {{ trip.resort }}</p>
      <p class="card-text" style="word-wrap: normal;white-space:pre-wrap">üìÜ C {{ trip.start_date|date:"d.m.Y" }} –Ω–∞ {{ trip.duration }} –Ω–æ—á–µ–π</p>
      <p class="card-text" style="word-wrap: normal;white-space:pre-wrap">üë• –ù–∞ –¥–≤–æ–∏—Ö</p>
      <p class="card-text" style="word-wrap: normal;white-space:pre-wrap">üèñ {{ trip.beach }}</p>
      <p class="card-text" style="word-wrap: normal;white-space:pre-wrap">ü•ò {{ trip.meal_type }}</p>
      <p class="card-text" style="word-wrap: normal;white-space:pre-wrap">‚õ∫ {{ trip.room_type }}</p>
      <p class="card-text" style="word-wrap: normal;white-space:pre-wrap">üí∞ –û—Ç {{ trip.price |floatformat:"0"}}</p>
      <a href="{{trip.get_absolute_url}}" class="btn btn-dark">–ü–æ–¥—Ä–æ–±–Ω–µ–µ</a>
      <a href="https://wa.me/{{ seller.mobile_phone_number }}?text=–ü—Ä–∏–≤–µ—Ç! –ú–µ–Ω—è –∑–∞–∏–Ω—Ç–µ—Ä–µ—Å–æ–≤–∞–ª –æ—Ç–µ–ª—å {{trip.name}} –≤ {{trip.resort.country}} {{trip.resort}}" class="btn btn-warning">WhatsApp</a>
          {% if user.is_authenticated %}
          <a href="/trip/{{trip.id}}/edit" class="btn btn-danger">–ò–∑–º–µ–Ω–∏—Ç—å</a>
          {% endif %}
    </div>
  </div>
  {% endfor %}
</div>
  <div style="flex-wrap: wrap;padding-top: 10px; padding-left: 10px;padding-right: 10px;padding-bottom: 10px">
  <p>* –¶–µ–Ω—ã –∞–∫—Ç—É–∞–ª—å–Ω—ã –Ω–∞ –º–æ–º–µ–Ω—Ç –ø—É–±–ª–∏–∫–∞—Ü–∏–∏. –î–µ—Ç–∞–ª–∏ —É—Ç–æ—á–Ω—è–π—Ç–µ —É –º–µ–Ω–µ–¥–∂–µ—Ä–∞.</p>
  </div>
<nav aria-label="Page navigation tours" style="padding-bottom:100px;">
  <ul class="pagination justify-content-center">
        {% if page_obj.has_previous %}
        <li class="page-item"><a class="page-link text-dark" href="?page={{ page_obj.previous_page_number }}">–ü—Ä–µ–¥</a></li>
        {% endif %}
        {% for page_number in paginator.page_range %}
            {% if page_number == page_obj.number %}
                <li class="page-item active"><a class="page-link bg-dark dark border-dark" href="?page={{ page_number }}#start">{{ page_number }}</a></li>
            {% else %}
                <li class="page-item"><a class="page-link text-dark"href="?page={{ page_number }}#start">{{ page_number }}</a></li>
            {% endif%}
        {% endfor%}
        {% if page_obj.has_next %}
        <li class="page-item"><a class="page-link text-dark"href="?page={{ page_obj.next_page_number }}">–°–ª–µ–¥</a></li>
        {% endif %}
  </ul>
</nav>
        <script>
           $(document).ready(function(){
           $(".nav-link .active").removeClass("active");
           $("#index").addClass("active");
            });

        $('#search').on('click', function() {
              var text = $('#selectcountry').val();
              window.location = "/?search_query=" + text +"#start";  
});
            function getComboA(selectObject) {
              var value = selectObject.value;  
                            console.log(value);
              var link = document.getElementById("link");
              var old_link = link.getAttribute('href');
              var new_link = old_link + value;
              link.setAttribute('href', new_link);
}
        </script>
{% endblock %}
